# Copy this file to .env and update the values as needed

# RAVN Observability Platform Configuration

# =============================================================================
# DEPLOYMENT ENVIRONMENT
# =============================================================================
ENVIRONMENT=local
STORAGE_TYPE=filesystem  # filesystem | s3 | gcs
RULE_STORAGE_MODE=local  # local | s3 | gcs

# =============================================================================
# SERVICE PORTS
# =============================================================================
GRAFANA_PORT=3030
ALLOY_OTLP_GRPC_PORT=4317
ALLOY_OTLP_HTTP_PORT=4318
ALLOY_UI_PORT=12345
MIMIR_PORT=9009
LOKI_PORT=3100
TEMPO_PORT=3200

# =============================================================================
# SECURITY
# =============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=changeme_admin_password

# TLS (enable for production)
TLS_ENABLED=false

# =============================================================================
# DATABASE MONITORING
# =============================================================================
DB_DSN=postgresql://postgres:postgres@host.docker.internal:5432/yourdb?sslmode=disable

# =============================================================================
# DATA STORAGE
# =============================================================================
# AWS S3 (set when STORAGE_TYPE=s3)
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_BUCKET_LOGS=
S3_BUCKET_TRACES=
S3_BUCKET_METRICS=

# Google Cloud (set when STORAGE_TYPE=gcs)
GCS_BUCKET_LOGS=
GCS_BUCKET_TRACES=
GCS_BUCKET_METRICS=

# =============================================================================
# DATA RETENTION
# =============================================================================
LOKI_RETENTION_HOURS=168     # 7 days
TEMPO_RETENTION_HOURS=336    # 14 days
MIMIR_RETENTION_HOURS=8760   # 365 days

# =============================================================================
# PERFORMANCE
# =============================================================================
# Ingestion rate limits
LOKI_INGESTION_RATE_MB=4
LOKI_INGESTION_BURST_MB=6
TEMPO_INGESTION_RATE_MB=100
TEMPO_INGESTION_BURST_MB=200
MIMIR_INGESTION_RATE=50000
MIMIR_INGESTION_BURST=100000

# =============================================================================
# ADVANCED SETTINGS (usually don't need to change)
# =============================================================================
LOG_LEVEL=info

# Service hostnames (for internal communication)
MIMIR_HOST=mimir
LOKI_HOST=loki
TEMPO_HOST=tempo
MIMIR_INTERNAL_PORT=9009
LOKI_INTERNAL_PORT=3100
TEMPO_INTERNAL_PORT=4317

# Replication factors (1 for single-node, 3 for HA)
LOKI_REPLICATION_FACTOR=1
TEMPO_REPLICATION_FACTOR=1
MIMIR_REPLICATION_FACTOR=1

# Key-value store type (inmemory for single-node, etcd/consul for HA)
KVSTORE_TYPE=inmemory

# Multi-tenancy
MULTITENANCY_ENABLED=false
DEFAULT_TENANT=anonymous




# Environment Variables Template for Userdemo Agent + Micrometer Application

# ===== PostgreSQL Database Configuration =====
POSTGRES_DB=userdemo
POSTGRES_USER=userdemo
POSTGRES_PASSWORD=userdemo
DB_HOST=postgres
DB_PORT=5432

# Database URL for Spring Boot application
DB_URL=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${POSTGRES_DB}
DB_USERNAME=${POSTGRES_USER}
DB_PASSWORD=${POSTGRES_PASSWORD}

# ===== OpenTelemetry Agent Configuration =====
# Service identification
OTEL_SERVICE_NAME=userdemo-agent-micrometer
OTEL_SERVICE_VERSION=0.0.1
OTEL_DEPLOYMENT_ENVIRONMENT=development

# OTLP Endpoint (Alloy to route to Tempo for traces)
OTEL_EXPORTER_OTLP_ENDPOINT=http://alloy:4318

# MDC (Mapped Diagnostic Context) for trace correlation in logs
# These enable trace_id and span_id in application logs automatically
OTEL_INSTRUMENTATION_COMMON_MDC_ENABLED=true
OTEL_INSTRUMENTATION_LOGBACK_MDC_ADD_BAGGAGE=true

# Resource attributes for better observability
OTEL_RESOURCE_ATTRIBUTES=service.name=${OTEL_SERVICE_NAME},service.version=${OTEL_SERVICE_VERSION},deployment.environment=${OTEL_DEPLOYMENT_ENVIRONMENT}

# ===== Application Configuration =====
SERVER_PORT=8081
